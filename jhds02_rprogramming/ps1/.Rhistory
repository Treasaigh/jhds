pm_pollution <- rbind(pm_pollution, dfa)
}
setwd(dir_base)
pm_pollution <- pm_pollution[complete.cases(pm_pollution),]
pm_agg <- as.data.frame(table(pm_pollution$ID), row.names=NULL)
names(pm_agg) <- c('id','nobs')
pm_agg[order(id),]
}
complete("specdata", c(2, 4, 8, 10, 12))
complete("specdata", 1)
complete("specdata", 3)
complete("specdata", 30:25)
submit()
pm_agg[order(30:25),]
pm2 <- pm_agg[order(30:25),]
pm2
as.data.frame(table(pm_pollution$ID)[order(30:25),])
as.data.frame(table(pm_pollution$ID))
id <- 30:25
pm_agg[order(id),]
complete <- function(directory, id = 1:332) {
dir_base <- "~/Dropbox/Education/JHDS 2 - R Programming/ps1"
setwd(paste(dir_base, directory, sep='/'))
pm_pollution <- data.frame()
for (i in id) {
list_files <- list.files()
dfa <- read.table(file=list_files[i], sep=',', header=TRUE)
pm_pollution <- rbind(pm_pollution, dfa)
}
setwd(dir_base)
pm_pollution <- pm_pollution[complete.cases(pm_pollution),]
nobs <- sapply(id,pm_pollution)
data.frame(id, nobs)
}
complete("specdata", 1)
sapply(id,pm_pollution)
complete <- function(directory, id = 1:332) {
## 'directory' is a character vector of length 1 indicating
## the location of the CSV files
## 'id' is an integer vector indicating the monitor ID numbers
## to be used
## Return a data frame of the form:
## id nobs
## 1  117
## 2  1041
## ...
## where 'id' is the monitor ID number and 'nobs' is the
## number of complete cases
full <- function(x) {
data <- getmonitor(x, directory)
return( nrow(data[complete.cases(data),] ) )
}
nobs = sapply(id, full)
result = data.frame(id, nobs)
return (result)
}
complete("specdata", 1)
complete("specdata", 30:25)
sapply(id,pm_pollution)
sapply(pm_pollution$id,sum)
pm_agg <- as.data.frame(table(pm_pollution$ID))
names(pm_agg) <- c('id','nobs')
id <- 30:25
pm_agg[order(id),]
pm_agg2 <- data.frame(pm_agg)
pm_agg2
pm_agg2 <- data.frame(pm_agg[order(id),])
pm_agg2
pm_agg <- data.frame(pm_agg[order(id),])
length(pm_agg$id)
pm_agg <- data.frame(pm_agg[order(id),], row.names=c(5:10))
pm_agg
id <- 30:25
pm_agg <- data.frame(pm_agg[order(id),], row.names=c(1:(length(pm_agg$id))))
pm_agg
complete <- function(directory, id = 1:332) {
dir_base <- "~/Dropbox/Education/JHDS 2 - R Programming/ps1"
setwd(paste(dir_base, directory, sep='/'))
pm_pollution <- data.frame()
for (i in id) {
list_files <- list.files()
dfa <- read.table(file=list_files[i], sep=',', header=TRUE)
pm_pollution <- rbind(pm_pollution, dfa)
}
setwd(dir_base)
pm_pollution <- pm_pollution[complete.cases(pm_pollution),]
pm_agg <- as.data.frame(table(pm_pollution$ID), row.names=NULL)
names(pm_agg) <- c('id','nobs')
pm_agg <- data.frame(pm_agg[order(id),], row.names=c(1:(length(pm_agg$id))))
pm_agg
}
complete("specdata", 1)
complete("specdata", c(2, 4, 8, 10, 12))
complete("specdata", 30:25)
complete("specdata", 3)
submit()
length(30:28)
pm_agg <- data.frame(pm_agg[order(id),], row.names=c(1:(length(pm_agg$id))))
pm_agg
pm_agg
submit()
source("http://d396qusza40orc.cloudfront.net/rprog%2Fscripts%2Fsubmitscript1.R")
submit()
complete <- function(directory, id = 1:332) {
dir_base <- "~/Dropbox/Education/JHDS 2 - R Programming/ps1"
setwd(paste(dir_base, directory, sep='/'))
pm_pollution <- data.frame()
for (i in id) {
list_files <- list.files()
dfa <- read.table(file=list_files[i], sep=',', header=TRUE)
pm_pollution <- rbind(pm_pollution, dfa)
}
setwd(dir_base)
pm_pollution <- pm_pollution[complete.cases(pm_pollution),]
pm_agg <- as.data.frame(table(pm_pollution$ID), row.names=NULL)
names(pm_agg) <- c('id','nobs')
pm_agg <- data.frame(pm_agg[order(id),], row.names=c(1:(length(pm_agg$id))))
pm_agg
}
complete("specdata", c(2, 4, 8, 10, 12))
complete("specdata", 30:25)
complete("specdata", 332:1)
length(332:1)
length(30:25)
head(332:1)
tail(332:1)
length(30:25)
length(25:30)
length(1:3)
length(1:4)
length(2:4)
complete <- function(directory, id = 1:332) {
dir_base <- "~/Dropbox/Education/JHDS 2 - R Programming/ps1"
setwd(paste(dir_base, directory, sep='/'))
pm_pollution <- data.frame()
for (i in id) {
list_files <- list.files()
dfa <- read.table(file=list_files[i], sep=',', header=TRUE)
pm_pollution <- rbind(pm_pollution, dfa)
}
setwd(dir_base)
pm_pollution <- pm_pollution[complete.cases(pm_pollution),]
pm_agg <- as.data.frame(table(pm_pollution$ID), row.names=NULL)
names(pm_agg) <- c('id','nobs')
pm_agg <- data.frame(pm_agg[order(id),], row.names=c(1:(length(pm_agg$id))))
pm_agg
}
complete("specdata", 1:5)
complete("specdata", 5:1)
complete("specdata", 100:1)
complete("specdata", 300:1)
complete("specdata", 150:1)
complete("specdata", 151:200)
complete("specdata", 201:250)
complete("specdata", 251:300)
complete("specdata", 251:260)
complete("specdata", 251:270)
complete("specdata", 271:280)
complete("specdata", 271:275)
complete("specdata", 272)
complete("specdata", 273)
complete("specdata", 274)
complete("specdata", 275)
complete <- function(directory, id = 1:332) {
dir_base <- "~/Dropbox/Education/JHDS 2 - R Programming/ps1"
setwd(paste(dir_base, directory, sep='/'))
pm_pollution <- data.frame()
for (i in id) {
list_files <- list.files()
dfa <- read.table(file=list_files[i], sep=',', header=TRUE)
pm_pollution <- rbind(pm_pollution, dfa)
}
setwd(dir_base)
pm_pollution <- pm_pollution[complete.cases(pm_pollution),]
pm_agg <- as.data.frame(table(pm_pollution$ID), row.names=NULL)
names(pm_agg) <- c('id','nobs')
pm_agg <- data.frame(pm_agg[order(id),], row.names=c(1:(length(pm_agg$id) - 1)))
pm_agg
}
complete("specdata", 30:25)
complete("specdata", 270:280)
pm_pollution <- data.frame()
setwd("~/Dropbox/Education/JHDS 2 - R Programming/ps1")
dir_base <- "~/Dropbox/Education/JHDS 2 - R Programming/ps1"
dir_end <- "specdata"
paste(dir_base, dir_end, sep='/')
setwd(paste(dir_base, dir_end, sep='/'))
pm_pollution <- data.frame()
for (i in 332:1) {
list_files <- list.files()
dfa <- read.table(file=list_files[i], sep=',', header=TRUE)
pm_pollution <- rbind(pm_pollution, dfa)
}
pm_pollution <- pm_pollution[complete.cases(pm_pollution),]
pm_agg <- as.data.frame(table(pm_pollution$ID))
length(pm_agg$id)
names(pm_agg) <- c('id','nobs')
pm_agg[order(id),]
head(pm_agg$id)
length(pm_agg$nobs)
length(pm_agg$id)
pm_agg <- data.frame(pm_agg[order(id),], row.names=c(1:(length(pm_agg$id))))
pm_agg <- as.data.frame(table(pm_pollution$ID))
length(pm_agg$ID)
names(pm_agg) <- c('id','nobs')
length(pm_agg$ID)
head(pm_agg$id)
length(pm_agg$id)
pm_agg <- as.data.frame(table(pm_pollution$ID))
names(pm_agg) <- c('id','nobs')
length(pm_agg$id)
complete <- function(directory, id = 1:332) {
dir_base <- "~/Dropbox/Education/JHDS 2 - R Programming/ps1"
setwd(paste(dir_base, directory, sep='/'))
pm_pollution <- data.frame()
for (i in id) {
list_files <- list.files()
dfa <- read.table(file=list_files[i], sep=',', header=TRUE)
pm_pollution <- rbind(pm_pollution, dfa)
}
setwd(dir_base)
pm_pollution <- pm_pollution[complete.cases(pm_pollution),]
pm_agg <- as.data.frame(table(pm_pollution$ID))
toss <- summary(pm_agg$id)
pm_agg <- data.frame(pm_agg[order(id),], row.names=c(1:(length(pm_agg$id))))
pm_agg
}
complete("specdata", 30:25)
complete <- function(directory, id = 1:332) {
dir_base <- "~/Dropbox/Education/JHDS 2 - R Programming/ps1"
setwd(paste(dir_base, directory, sep='/'))
pm_pollution <- data.frame()
for (i in id) {
list_files <- list.files()
dfa <- read.table(file=list_files[i], sep=',', header=TRUE)
pm_pollution <- rbind(pm_pollution, dfa)
}
setwd(dir_base)
pm_pollution <- pm_pollution[complete.cases(pm_pollution),]
pm_agg <- as.data.frame(table(pm_pollution$ID))
names(pm_agg) <- c('id','nobs')
toss <- summary(pm_agg$id)
pm_agg <- data.frame(pm_agg[order(id),], row.names=c(1:(length(pm_agg$id))))
pm_agg
}
complete("specdata", 30:25)
complete("specdata", c(2, 4, 8, 10, 12))
complete("specdata", 270:280)
setwd("~/Dropbox/Education/JHDS 2 - R Programming/ps1")
dir_base <- "~/Dropbox/Education/JHDS 2 - R Programming/ps1"
dir_end <- "specdata"
paste(dir_base, dir_end, sep='/')
setwd(paste(dir_base, dir_end, sep='/'))
pm_pollution <- data.frame()
for (i in 332:1) {
list_files <- list.files()
dfa <- read.table(file=list_files[i], sep=',', header=TRUE)
pm_pollution <- rbind(pm_pollution, dfa)
}
pm_pollution <- pm_pollution[complete.cases(pm_pollution),]
pm_agg <- as.data.frame(table(pm_pollution$ID))
names(pm_agg) <- c('id','nobs')
id <- 332:1
pm_agg[order(id),]
length(pm_agg$ID)
length(pm_agg$id)
pm_agg <- data.frame(pm_agg[order(id),], row.names=c(1:(length(pm_agg$id))))
head(pm_agg$id)
length(pm_agg$id)
pm_agg <- data.frame(pm_agg[order(id),], row.names=c(1:(length(pm_agg$id))))
pm_agg <- data.frame(pm_agg[order(id),], row.names=(1:(length(pm_agg$id))))
pm_agg <- data.frame(pm_agg[order(id),])
head(pm_agg$id)
pm_agg
len_save <- length(pm_agg$id)
len_save <- as.integer(length(pm_agg$id))
pm_agg <- as.data.frame(table(pm_pollution$ID))
pm_agg <- data.frame(pm_agg[order(id),], row.names=c(1:len_save)))
pm_agg <- data.frame(pm_agg[order(id),], row.names=c(1:len_save))
length(pm_agg$id)
head(pm_agg$id)
pm_agg <- as.data.frame(table(pm_pollution$ID))
names(pm_agg) <- c('id','nobs')
id <- 332:1
pm_agg[order(id),]
len_save <- length(pm_agg$id)
length(pm_agg$id)
pm_agg <- data.frame(pm_agg[order(id),], row.names=c(1:len_save))
length(1:323)
pm_agg <- data.frame(pm_agg[order(id),], row.names=c(1:323))
head(pm_agg)
tail(pm_agg)
pm_agg <- data.frame(pm_agg[order(id),], row.names=c(1:323))
pm_agg <- data.frame(pm_agg[order(id),], row.names=(1:323))
class(pm_agg$id)
length(pm_agg$id)
class(length(pm_agg$id))
length(c(1:323))
pm_agg <- data.frame(pm_agg[order(id),], row.names=c(1:332))
pm_agg <- data.frame(pm_agg[order(id),])
pm_agg <- data.frame(pm_agg[order(id),])
pm_agg2 <- data.frame(pm_agg, row.names=c(1:len_save))
pm_agg[275,]
pm_pollution <- pm_pollution[complete.cases(pm_pollution),]
pm_agg <- as.data.frame(table(pm_pollution$ID))
names(pm_agg) <- c('id','nobs')
names(pm_agg) <- c('id','nobs')
len_save <- length(pm_agg$id)
len_save
pm_agg2 <- data.frame(pm_agg, row.names=c(len_save:1))
pm_agg2
pm_agg2 <- data.frame(pm_agg2[order(row.names)])
id <- 332:1
pm_agg2 <- data.frame(pm_agg2[order(id)])
pm_agg2 <- data.frame(pm_agg2[order(id),])
pm_agg2
complete <- function(directory, id = 1:332) {
dir_base <- "~/Dropbox/Education/JHDS 2 - R Programming/ps1"
setwd(paste(dir_base, directory, sep='/'))
pm_pollution <- data.frame()
for (i in id) {
list_files <- list.files()
dfa <- read.table(file=list_files[i], sep=',', header=TRUE)
pm_pollution <- rbind(pm_pollution, dfa)
}
setwd(dir_base)
pm_pollution <- pm_pollution[complete.cases(pm_pollution),]
pm_agg <- as.data.frame(table(pm_pollution$ID))
names(pm_agg) <- c('id','nobs')
len_save <- length(pm_agg$id)
pm_agg2 <- data.frame(pm_agg, row.names=c(len_save:1))
pm_agg2 <- data.frame(pm_agg2[order(id),])
pm_agg2
}
complete("specdata", 1)
complete("specdata", c(2, 4, 8, 10, 12))
complete("specdata", 30:25)
complete("specdata", 270:280)
submit()
source("http://d396qusza40orc.cloudfront.net/rprog%2Fscripts%2Fsubmitscript1.R")
submit()
complete <- function(directory="specdata", id=1:332) {
complete.data <- data.frame(id=rep(""), nobs=rep(1), stringsAsFactors=FALSE)
n <- 1
for (i in id) {
ii   <- fileNumber(i)
dir  <- gsub(" ", "", paste(directory, "/", ii, ".csv"))
data <- read.csv(dir, header=TRUE, sep="," )
nobs <- getNobs(data)
complete.data[n, ] <- c(i, nobs)
n    <- n+1
}
print(complete.data)
}
fileNumber <- function(i) {
if (nchar(i) == 1) {
i <- gsub(' ', '', paste("00", i))
} else if (nchar(i) == 2) {
i <- gsub(' ', '', paste("0", i))
} else if (nchar(i) == 3 ) {
i <- gsub(' ', '', paste("", i))
}
i
}
getNobs <- function(data) {
good.obs    <- complete.cases(data$sulfate, data$nitrate)
sulfate.obs <- length(data$sulfate[good.obs])
nitrate.obs <- length(data$nitrate[good.obs])
if (sulfate.obs < nitrate.obs) {
nobs <- sulfate.obs
} else {
nobs <- nitrate.obs
}
nobs
}
complete("specdata", 30:25)
complete("specdata", 3)
complete("specdata", c(2, 4, 8, 10, 12))
submit()
list.files()
dir_base <- "~/Dropbox/Education/JHDS 2 - R Programming/ps1"
setwd(paste(dir_base, directory, sep='/'))
setwd("~/Dropbox/Education/JHDS 2 - R Programming/ps1")
dir_base <- "~/Dropbox/Education/JHDS 2 - R Programming/ps1"
dir_end <- "specdata"
paste(dir_base, dir_end, sep='/')
setwd(paste(dir_base, dir_end, sep='/'))
pm_pollution <- data.frame()
for (i in 1:332) {
list_files <- list.files()
dfa <- read.table(file=list_files[i], sep=',', header=TRUE)
pm_pollution <- rbind(pm_pollution, dfa)
}
setwd(dir_base)
pm_pollution <- pm_pollution[complete.cases(pm_pollution),]
library(reshape2)
directory = 'specdata'
threshold = 0
dir_base <- "~/Dropbox/Education/JHDS 2 - R Programming/ps1"
setwd(paste(dir_base, directory, sep='/'))
pm_pollution <- data.frame()
for (i in 1:332) {
list_files <- list.files()
dfa <- read.table(file=list_files[i], sep=',', header=TRUE)
pm_pollution <- rbind(pm_pollution, dfa)
}
setwd(dir_base)
pm_pollution <- pm_pollution[complete.cases(pm_pollution),]
pm_agg <- as.data.frame(table(pm_pollution$ID))
threshold = 150
pm_agg <- subset(pm_agg, nobs > threshold)
pm_agg <- subset(pm_agg, pm_agg$nobs > threshold)
pm_agg <- as.data.frame(table(pm_pollution$ID))
names(pm_agg) <- c('id','nobs')
pm_agg <- subset(pm_agg, pm_agg$nobs > threshold)
pm_poll <- subset(pm_pollution, pm_pollution$ID %in% pm_agg$id)
cor(pm_poll$sulfate, pm_poll$nitrate)
tapply(pm_poll$sulfate, pm_poll$ID, mean)
summart(tapply(pm_poll$sulfate, pm_poll$ID, mean))
summary(tapply(pm_poll$sulfate, pm_poll$ID, mean))
tapply(pm_poll$sulfate, pm_poll$ID, mean)
tapply(pm_poll$sulfate, pm_poll$ID, cor, y=pm_poll$nitrate)
tapply(pm_poll$sulfate, pm_poll$ID, cor, x=pm_poll$sulfate, y=pm_poll$nitrate)
tapply(pm_poll$ID, cor, x=pm_poll$sulfate, y=pm_poll$nitrate)
output <- vector()
ouptut
length(ouptut)
output <- vector(1)
output
by(pm_poll, ID, mean)
by(pm_poll, pm_poll$ID, mean)
by(pm_poll, pm_poll$ID, mean(pm_poll$sulfate))
by(pm_poll, pm_poll$ID, FUN=mean(pm_poll$sulfate))
by(pm_poll,pm_poll[,c(2,3)], cor)
by(pm_poll$ID ,pm_poll[,c(2,3)], cor)
output <- vector()
for (i in pm_poll$ID) {
print(i)
}
output <- vector()
for (i in pm_agg$id) {
print(i)
}
for (i in pm_agg$id) {
print(i)
sub <- subset(pm_poll, pm_poll$ID == i)
print(cor(sub$sulfate, sub$nitrate))
#append(x=output, )
}
output <- vector()
for (i in pm_agg$id) {
sub <- subset(pm_poll, pm_poll$ID == i)
cor_act <- cor(sub$sulfate, sub$nitrate)
append(x=output, values=cor_act)
}
output
output <- vector()
append(output, 1)
output
output <- append(output, 1)
output
output <- append(output, 2)
output
output <- vector()
for (i in pm_agg$id) {
sub <- subset(pm_poll, pm_poll$ID == i)
cor_act <- cor(sub$sulfate, sub$nitrate)
output <- append(x=output, values=cor_act)
}
output
cr <- corr("specdata", 150)
head(cr)
corr <- function(directory, threshold = 0) {
dir_base <- "~/Dropbox/Education/JHDS 2 - R Programming/ps1"
setwd(paste(dir_base, directory, sep='/'))
pm_pollution <- data.frame()
for (i in 1:332) {
list_files <- list.files()
dfa <- read.table(file=list_files[i], sep=',', header=TRUE)
pm_pollution <- rbind(pm_pollution, dfa)
}
setwd(dir_base)
pm_pollution <- pm_pollution[complete.cases(pm_pollution),]
pm_agg <- as.data.frame(table(pm_pollution$ID))
names(pm_agg) <- c('id','nobs')
pm_agg <- subset(pm_agg, pm_agg$nobs > threshold)
pm_poll <- subset(pm_pollution, pm_pollution$ID %in% pm_agg$id)
cor(pm_poll$sulfate, pm_poll$nitrate)
output <- vector()
for (i in pm_agg$id) {
sub <- subset(pm_poll, pm_poll$ID == i)
cor_act <- cor(sub$sulfate, sub$nitrate)
output <- append(x=output, values=cor_act)
}
output
}
cr <- corr("specdata", 150)
head(cr)
summary(cr)
cr <- corr("specdata", 400)
head(cr)
summary(cr)
cr <- corr("specdata", 5000)
summary(cr)
length(cr)
cr <- corr("specdata")
summary(cr)
length(cr)
source("http://d396qusza40orc.cloudfront.net/rprog%2Fscripts%2Fsubmitscript1.R")
submit()
submit()
submit()
